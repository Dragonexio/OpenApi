# 币币交易

## 新建Token

1. Method: POST
1. URL: [/api/v2/token/new/](https://openapi.dragonex.co/api/v2/token/new/)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data | {} |  |  |  |
    | data.expire_time | int | 1578996922 |  |  |
    | data.token | string | 8iGSjTneySY+v5ZOEQFHw098AGg= |  |  |
    | data.uid | int | 1000001 |  | 用户ID |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":{"expire_time":1578996922,"token":"8iGSjTneySY+v5ZOEQFHw098AGg=","uid":1000001}}
    ```

## 校验Token状态

1. Method: POST
1. URL: [/api/v2/token/status](https://openapi.dragonex.co/api/v2/token/status)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data | {} |  |  |  |
    | data.uid | int | 1000001 |  | 用户ID |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":{"uid":1000001}}
    ```

## 查询币种列表

1. Method: GET
1. URL: [/api/v2/coin/list/](https://openapi.dragonex.co/api/v2/coin/list/?offset=0&limit=3)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | limit | int | 3 |  | 条数，最大500 |
    | offset | int | 0 |  | 偏移量，从0开始，默认0 |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data[i] | [] |  |  |  |
    | data[i].coin_code | string | eth |  | 币种Code |
    | data[i].has_tag | bool | false |  | 是否有备注：true-有，false-没有 |
    | data[i].min_withdraw | string | 0.01 |  | 单次最小提币数 |
    | data[i].prepay_toggle | bool | true |  | [开关](./枚举说明.md#开关) |
    | data[i].tag_name | string |  |  | 备注名称 |
    | data[i].withdraw_poundage | string | 0.01 |  | 提币手续费 |
    | data[i].withdraw_toggle | string | On |  | [开关](./枚举说明.md#开关) |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":[{"coin_code":"btc","has_tag":false,"min_withdraw":"0.001","prepay_toggle":true,"tag_name":"","withdraw_poundage":"0.001","withdraw_toggle":"On"},{"coin_code":"llt","has_tag":false,"min_withdraw":"0.01","prepay_toggle":true,"tag_name":"","withdraw_poundage":"0.1","withdraw_toggle":"On"},{"coin_code":"eth","has_tag":false,"min_withdraw":"0.01","prepay_toggle":true,"tag_name":"","withdraw_poundage":"0.01","withdraw_toggle":"On"}]}
    ```

## 查询币种详情

1. Method: GET
1. URL: [/api/v2/coin/detail/](https://openapi.dragonex.co/api/v2/coin/detail/?coin_code=btc)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | coin_code | string | btc |  | 币种Code |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data | {} |  |  |  |
    | data.coin_code | string | btc |  | 币种Code |
    | data.has_tag | bool | false |  | 是否有备注：true-有，false-没有 |
    | data.min_withdraw | string | 0.001 |  | 单次最小提币数 |
    | data.prepay_toggle | bool | true |  | [开关](./枚举说明.md#开关) |
    | data.tag_name | string |  |  | 备注名称 |
    | data.withdraw_poundage | string | 0.001 |  | 提币手续费 |
    | data.withdraw_toggle | string | On |  | [开关](./枚举说明.md#开关) |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":{"coin_code":"btc","has_tag":false,"min_withdraw":"0.001","prepay_toggle":true,"tag_name":"","withdraw_poundage":"0.001","withdraw_toggle":"On"}}
    ```

## 查询交易对列表

1. Method: GET
1. URL: [/api/v2/symbol/list/](https://openapi.dragonex.co/api/v2/symbol/list/?offset=0&limit=2)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | limit | int | 2 |  | 条数，最大500 |
    | offset | int | 0 |  | 偏移量，从0开始，默认0 |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data[i] | [] |  |  |  |
    | data[i].amount_floor | string | 1 |  | 交易额下限 |
    | data[i].amount_precision | string | 0 |  | 交易额精度 |
    | data[i].buy_charge_rate | string | 0.002 |  | 买入手续费率，如0.001表示0.1% |
    | data[i].buy_toggle | string | On |  | [下买单开关](./枚举说明.md#开关) |
    | data[i].lever_toggle | string | Off |  | [杠杆交易开关](./枚举说明.md#开关) |
    | data[i].make_fee_rate | string | 0.001 |  |  |
    | data[i].price_floor | string | 0.001 |  | 价格下限 |
    | data[i].price_precision | string | 0 |  | 价格精度 |
    | data[i].sell_charge_rate | string | 0.002 |  | 卖出手续费率，如0.001表示0.1% |
    | data[i].sell_toggle | string | On |  | [下卖单开关](./枚举说明.md#开关) |
    | data[i].symbol | string | cnht_usdt |  | 交易对 |
    | data[i].take_fee_rate | string | 0.002 |  |  |
    | data[i].volume_floor | string | 0.001 |  | 数量下限 |
    | data[i].volume_precision | string | 0 |  | 数量精度 |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":[{"amount_floor":"1","amount_precision":"0","buy_charge_rate":"0.002","buy_toggle":"On","lever_toggle":"On","make_fee_rate":"0.001","price_floor":"0.001","price_precision":"0","sell_charge_rate":"0.002","sell_toggle":"On","symbol":"dc_usdt","take_fee_rate":"0.002","volume_floor":"0.001","volume_precision":"0"},{"amount_floor":"1","amount_precision":"0","buy_charge_rate":"0.002","buy_toggle":"On","lever_toggle":"Off","make_fee_rate":"0.001","price_floor":"0.001","price_precision":"0","sell_charge_rate":"0.002","sell_toggle":"On","symbol":"cnht_usdt","take_fee_rate":"0.002","volume_floor":"0.001","volume_precision":"0"}]}
    ```

## 查询交易对详情

1. Method: GET
1. URL: [/api/v2/symbol/detail/](https://openapi.dragonex.co/api/v2/symbol/detail/?symbol=btc_usdt)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | symbol | string | btc_usdt |  | 交易对 |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data | {} |  |  |  |
    | data.amount_floor | string | 1 |  | 交易额下限 |
    | data.amount_precision | string | 0 |  | 交易额精度 |
    | data.buy_charge_rate | string | 0.0005 |  | 买入手续费率，如0.001表示0.1% |
    | data.buy_toggle | string | On |  | [下买单开关](./枚举说明.md#开关) |
    | data.lever_toggle | string | Off |  | [杠杆交易开关](./枚举说明.md#开关) |
    | data.make_fee_rate | string | 0.001 |  |  |
    | data.price_floor | string | 0.001 |  | 价格下限 |
    | data.price_precision | string | 0 |  | 价格精度 |
    | data.sell_charge_rate | string | 0.0005 |  | 卖出手续费率，如0.001表示0.1% |
    | data.sell_toggle | string | On |  | [下卖单开关](./枚举说明.md#开关) |
    | data.symbol | string | btc_usdt |  | 交易对 |
    | data.take_fee_rate | string | 0.002 |  |  |
    | data.volume_floor | string | 0.001 |  | 数量下限 |
    | data.volume_precision | string | 0 |  | 数量精度 |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":{"amount_floor":"1","amount_precision":"0","buy_charge_rate":"0.0005","buy_toggle":"On","lever_toggle":"Off","make_fee_rate":"0.001","price_floor":"0.001","price_precision":"0","sell_charge_rate":"0.0005","sell_toggle":"On","symbol":"btc_usdt","take_fee_rate":"0.002","volume_floor":"0.001","volume_precision":"0"}}
    ```

## 查询用户信息

1. Method: POST
1. URL: [/api/v2/user/detail/](https://openapi.dragonex.co/api/v2/user/detail/)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data | {} |  |  |  |
    | data.area | string | +86 |  |  |
    | data.email | string |  |  | 邮箱 |
    | data.mobile | string | +8612345678910 |  | 手机号 |
    | data.uid | int | 1000001 |  | 用户ID |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":{"area":"+86","email":"","mobile":"+8612345678910","uid":1000001}}
    ```

## 查询用户资产列表

1. Method: POST
1. URL: [/api/v2/user/coin/list/](https://openapi.dragonex.co/api/v2/user/coin/list/)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | limit | int | 2 |  | 条数，最大500 |
    | offset | int | 0 |  | 偏移量，从0开始，默认0 |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data[i] | [] |  |  |  |
    | data[i].coin_code | string | DC |  | 币种Code |
    | data[i].frozen | string | 338 |  | 被冻结数，可能由于挂单、提现等原因被冻结 |
    | data[i].total | string | 199848.44275 |  | 总资产，包含可用+冻结 |
    | data[i].usable | string | 199510.44275 |  | 可用数量 |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":[{"coin_code":"USDT","total":"413911.786591","frozen":"22725.122809","usable":"391186.663781"},{"coin_code":"DC","total":"199848.44275","frozen":"338","usable":"199510.44275"}]}
    ```

## 查询用户资产详情

1. Method: POST
1. URL: [/api/v2/user/coin/detail/](https://openapi.dragonex.co/api/v2/user/coin/detail/)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | coin_code | string | dt |  | 币种Code |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data | {} |  |  |  |
    | data.coin_code | string | DT |  | 币种Code |
    | data.frozen | string | 9093.145368 |  | 被冻结数，可能由于挂单、提现等原因被冻结 |
    | data.total | string | 9114.833725 |  | 总资产，包含可用+冻结 |
    | data.usable | string | 21.688357 |  | 可用数量 |
    | data.withdraw_quota | string | 0 |  | 剩余提币额度 |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":{"coin_code":"DT","frozen":"9093.145368","total":"9114.833725","usable":"21.688357","withdraw_quota":"0"}}
    ```

## 查询用户的成交额&&花费的手续费

1. Method: POST
1. URL: [/api/v2/user/coin/stat/](https://openapi.dragonex.co/api/v2/user/coin/stat/)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | day | int | 15 |  |  |
    | month | int | 1 |  |  |
    | year | int | 2020 |  |  |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data[i] | [] |  |  |  |
    | data[i].amount | string | 93056.110758 |  | 成交额，以coin_code计算 |
    | data[i].coin_code | string | usdt |  | 币种Code |
    | data[i].fee | string | 46.528055 |  | 手续费，以coin_code计算 |
    | data[i].usdt_amount | string | 93056.110758 |  | USDT计算的成交额 |
    | data[i].usdt_fee | string | 46.528055 |  | USDT计算的手续费 |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":[{"amount":"93056.110758","coin_code":"usdt","fee":"46.528055","usdt_amount":"93056.110758","usdt_fee":"46.528055"}]}
    ```

## K线

1. Method: POST
1. URL: [/api/v2/real/kline/](https://openapi.dragonex.co/api/v2/real/kline/)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | begin_time | int | 0 | N | 要查询的Kline开始时间（包含），传0则不筛选 |
    | cycle | string | 1hour |  | [K线类型](./枚举说明.md#K线类型) |
    | direction | string | Desc | N | [排序方向](./枚举说明.md#排序方向) |
    | end_time | int | 1579074282 | N | 要查询的Kline结束时间（包含），传0则不筛选 |
    | limit | int | 2 | N | 条数，最大500 |
    | offset | int | 0 | N | 偏移量，注意是在[begin_time, end_time]条件下的偏移量 |
    | symbol | string | BTC-USDT |  | 交易对 |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data[i] | [] |  |  |  |
    | data[i].a | string | 5030.0600 |  | K线周期内的成交额（以基础币种计） |
    | data[i].c | string | 5030.060041 |  | K线周期内的最后一笔成交价, 最新价 |
    | data[i].h | string | 5030.060041 |  | K线周期内的最高价 |
    | data[i].l | string | 5030.060041 |  | K线周期内的最低价 |
    | data[i].o | string | 5030.060041 |  | K线周期内的开盘价 |
    | data[i].lc | string | 0.000000 |  | 上一个K线周期内的最后一笔成交价 |
    | data[i].t | int | 1579071600000 |  | K线开始时间, 毫秒级时间戳 |
    | data[i].ua | string | 5030.0600 |  | K线周期内的成交额（以USDT计） |
    | data[i].v | string | 1.0000 |  | K线周期内的成交量 |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":[{"a":"47785.5704","c":"5030.060041","h":"5030.060041","l":"5030.060040","o":"5030.060040","lc":"0.000000","t":1579068000000,"ua":"47785.5704","v":"9.5000"},{"a":"5030.0600","c":"5030.060041","h":"5030.060041","l":"5030.060041","o":"5030.060041","lc":"0.000000","t":1579071600000,"ua":"5030.0600","v":"1.0000"}]}
    ```

## 获取深度

1. Method: POST
1. URL: [/api/v2/real/depth/](https://openapi.dragonex.co/api/v2/real/depth/)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | limit | int | 3 | N | 条数，最大500 |
    | symbol | string | BTC-USDT |  | 交易对 |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data | {} |  |  |  |
    | data.buys[i] | [] |  |  | 买盘 |
    | data.buys[i].p | string | 1400 |  | 价格 |
    | data.buys[i].v | string | 0.7000 |  | 数量 |
    | data.sells[i] | [] |  |  | 卖盘 |
    | data.sells[i].p | string | 8831.2965 |  | 价格 |
    | data.sells[i].v | string | 0.6660 |  | 数量 |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":{"buys":[{"p":"5030.06004","v":"8.5000"},{"p":"4000","v":"1.2345"},{"p":"1400","v":"0.7000"}],"sells":[{"p":"8818.4135","v":"0.6660"},{"p":"8824.855","v":"0.6660"},{"p":"8831.2965","v":"0.6660"}]}}
    ```

## 获取盘口数据

1. Method: POST
1. URL: [/api/v2/real/ticker/](https://openapi.dragonex.co/api/v2/real/ticker/)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | symbol | string | BTC-USDT |  | 交易对 |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data | {} |  |  |  |
    | data.c | string | 5030.060041 |  | 最后一笔成交价, 最新价 |
    | data.h | string | 5030.060041 |  | 24小时最高价 |
    | data.l | string | 5030.060040 |  | 24小时最低价 |
    | data.lc | string | 5030.060040 |  | 24小时前收盘价 |
    | data.o | string | 5030.060040 |  | 24小时开盘价 |
    | data.t | int | 1579073566000 |  | 最后一笔成交时间, 毫秒级时间戳 |
    | data.v | string | 11.5000 |  | 24小时成交量，按张数统计 |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":{"c":"5030.060041","h":"5030.060041","l":"5030.060040","lc":"5030.060040","o":"5030.060040","t":1579073566000,"v":"11.5000"}}
    ```

## 获取成交历史记录

1. Method: GET
1. URL: [/api/v2/real/trade/](https://openapi.dragonex.co/api/v2/real/trade/?symbol=BTC-USDT&direction=Desc&offset=0&limit=3)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | direction | string | Desc | N | [排序方向](./枚举说明.md#排序方向) |
    | limit | int | 3 | N | 条数，最大500 |
    | offset | int | 0 | N | 偏移量，从0开始，默认0 |
    | symbol | string | BTC-USDT |  | 交易对 |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data[i] | [] |  |  |  |
    | data[i].id | string | 15790715172757665911 |  | 交易ID |
    | data[i].p | string | 5030.060041 |  | 成交价格 |
    | data[i].s | string | Sell |  | [成交方向](./枚举说明.md#成交方向) |
    | data[i].t | int | 1579071517275 |  | 成交时间, 毫秒级时间戳 |
    | data[i].v | string | 1 |  | 成交数量 |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":[{"id":"15790735663737527764","p":"5030.060041","s":"Sell","t":1579073566373,"v":"1"},{"id":"15790715274544365921","p":"5030.060041","s":"Sell","t":1579071527454,"v":"1"},{"id":"15790715172757665911","p":"5030.060041","s":"Sell","t":1579071517275,"v":"1"}]}
    ```

## 下买单

1. Method: POST
1. URL: [/api/v2/user/order/buy/new/](https://openapi.dragonex.co/api/v2/user/order/buy/new/)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | price | string | 5030.060041 |  | 下单价格 |
    | symbol | string | btc_usdt |  | 交易对 |
    | volume | string | 0.01 |  | 下单数量 |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data | {} |  |  |  |
    | data.id | string | 1579083939225740001 |  |  |
    | data.price | string | 5030.060041 |  | 下单价格 |
    | data.status | string | Waiting |  | [订单状态](./枚举说明.md#现货订单状态) |
    | data.t | int | 1579083939225 |  | 下单时间，毫秒级时间戳 |
    | data.trade_volume | string | 0.0000 |  | 已成交数量 |
    | data.volume | string | 0.0100 |  | 下单数量 |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":{"id":"1579083939225740001","price":"5030.060041","status":"Waiting","t":1579083939225,"trade_volume":"0.0000","volume":"0.0100"}}
    ```

## 下卖单

1. Method: POST
1. URL: [/api/v2/user/order/sell/new/](https://openapi.dragonex.co/api/v2/user/order/sell/new/)
1. Params:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | price | string | 5030.060041 |  | 下单价格 |
    | symbol | string | btc_usdt |  | 交易对 |
    | volume | string | 0.01 |  | 下单数量 |

1. Response:

    | Field | Type | Example | Necessary | Desc |
    | --- | --- | --- | --- | --- |
    | code | int | 1 |  |  |
    | data | {} |  |  |  |
    | data.id | string | 1579083974749230001 |  |  |
    | data.price | string | 5030.060041 |  | 下单价格 |
    | data.status | string | Waiting |  | [订单状态](./枚举说明.md#现货订单状态) |
    | data.t | int | 1579083974749 |  | 下单时间，毫秒级时间戳 |
    | data.trade_volume | string | 0.0000 |  | 已成交数量 |
    | data.volume | string | 0.0100 |  | 下单数量 |
    | msg | string |  |  |  |
    | ok | bool | true |  |  |

1. Example:

    ```json
    {"ok":true,"code":1,"msg":"","data":{"id":"1579083974749230001","price":"5030.060041","status":"Waiting","t":1579083974749,"trade_volume":"0.0000","volume":"0.0100"}}
    ```